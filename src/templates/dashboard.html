<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <title>Parvaah Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static',filename='dashboard.css')}}"
    />
  </head>

  <body>
    <!-- Navigation Bar -->
    <header class="header">
      <nav class="navbar container">
        <a href="/" class="logo">
          <img
            src="../static/assets/images/Parvaah-logo.png"
            width="40"
            height="40"
          />
          <span>Parvaah</span>
        </a>

        <a href="./pages/profile.html" class="profile-icon">
          <i class="fas fa-user-circle"></i><span>Naresh Gupta</span>
        </a>
      </nav>
    </header>

    <!-- Dashboard Section -->
    <main>
      <section class="dashboard">
        <div class="container dashboard-container">
          <!-- Emergency & SOS Buttons -->
          <div class="dashboard-buttons">
            <a
              href="javascript:void(0)"
              class="btn-dashboard emergency-btn"
              onmousedown="startHold(event, 'emergency')"
              onmouseup="endHold(event)"
              ontouchstart="startHold(event, 'emergency')"
              ontouchend="endHold(event)"
            >
              <i class="fas fa-exclamation-triangle"></i
              ><span id="emergency-timer">Emergency</span>
            </a>

            <a
              href="javascript:void(0)"
              class="btn-dashboard sos-btn"
              onmousedown="startHold(event, 'sos')"
              onmouseup="endHold(event)"
              ontouchstart="startHold(event, 'sos')"
              ontouchend="endHold(event)"
            >
              <i class="fas fa-bullhorn"></i><span id="sos-timer">SOS</span>
            </a>
          </div>
          <!-- Services Buttons -->
          <div class="dashboard-services">
            <a href="/reminder" class="service-item">
              <img src="../static/assets/images/medrem.png" width="64" />
              <h3>Medicine Reminder</h3>
            </a>
            <a href="/appointreminder" class="service-item">
              <img src="../static/Assets/images/appoint.png" width="64" />
              <h3>Appointment Reminder</h3>
            </a>
            <a href="/community" class="service-item">
              <img src="../static/Assets/images/community.png" width="64" />
              <h3>Community</h3>
            </a>
            <!-- New Service Button -->
            <a href="/dashservices" class="service-item">
              <img src="../static/Assets/images/services.png" width="64" />
              <h3>Services</h3>
            </a>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-logo">
            <img
              src="../static/Assets/images/Parvaah-logo.png"
              width="40"
              height="40"
            />
            <span>Parvaah</span>
          </div>
          <div class="footer-links">
            <a href="privacy.html">Privacy Policy</a>
            <a href="terms.html">Terms of Service</a>
            <a href="#contact">Contact Us</a>
          </div>
          <div class="social-links">
            <a href="#" aria-label="Facebook"
              ><img
                src="../static/Assets/images/facebook.png"
                width="24"
                height="24"
            /></a>
            <a href="#" aria-label="Twitter"
              ><img
                src="../static/Assets/images/twiter.png"
                width="24"
                height="24"
            /></a>
            <a href="#" aria-label="Instagram"
              ><img
                src="../static/Assets/images/insta.jpg"
                width="24"
                height="24"
            /></a>
          </div>
        </div>
        <p class="copyright">&copy; 2023 Parvah. All rights reserved.</p>
      </div>
    </footer>

    <script>
      let holdTimeout;
      let holdTime = 3000; // 3 seconds
      let interval;

      function startHold(event, buttonType) {
        let startTime = Date.now();
        const button = event.currentTarget;
        const timerSpan = document.getElementById(buttonType + "-timer");

        let remainingTime = holdTime / 1000;
        timerSpan.innerText = `${remainingTime}s`;

        interval = setInterval(() => {
          remainingTime -= 1;
          timerSpan.innerText = `${remainingTime}s`;
        }, 1000);

        holdTimeout = setTimeout(() => {
          clearInterval(interval);
          timerSpan.innerText =
            buttonType === "emergency" ? "Emergency" : "SOS";

          if (buttonType === "emergency") {
            window.location.href = "/emergency";
          } else if (buttonType === "sos") {
            window.location.href = "/sos";
          }
        }, holdTime);
      }

      function endHold(event) {
        const button = event.currentTarget;
        const buttonType = button.classList.contains("emergency-btn")
          ? "emergency"
          : "sos";
        const timerSpan = document.getElementById(buttonType + "-timer");

        clearTimeout(holdTimeout);
        clearInterval(interval);

        timerSpan.innerText = buttonType === "emergency" ? "Emergency" : "SOS";
      }
    </script>
  </body>
</html>
