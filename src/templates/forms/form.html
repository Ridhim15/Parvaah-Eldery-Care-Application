{% extends 'base.html' %} {% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
{% endblock %}

{% block content %}
<div class="content">
  <div class="container">
    <div class="form-container">
      <!-- Profile Picture Section -->
      <form action="/fill_form" method="POST">

        <div class="profile-pic-container" onclick="document.getElementById('profilePicUpload').click();">
          <img id="profilePic" src="../static/assets/images/profile_def_m.png" alt="Profile Picture" />
          <input type="file" name='profile_image' id="profilePicUpload" accept="image/*" style="display: none"
            onchange="previewImage(event)" />
          <div class="edit-overlay">Click to upload</div>
        </div>

        <!-- Personal Information Section -->
        <div class="form-section">
          <label for="full_name">Full Name:</label>
          <input type="text" id="full_name" name="full_name"
            value="{{ user.full_name if user.full_name else user.username }}" {% if user.full_name %}
            style="background-color: #dcdcdc; cursor: not-allowed;" readonly {% endif %} required />
        </div>
        <div class="form-section">
          <label for="email">User Email:</label>
          <input type="email" id="email" name="email" value="{{ user.email }}" {% if user.email %}
            style="background-color: #dcdcdc; cursor: not-allowed;" readonly {% endif %} required />
        </div>

        <div class="form-section">
          <label for="gender">Gender:</label>
          <select id="gender" name="gender" required>
            <option value="" disabled selected>Select your gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </div>

        <div class="form-section">
          <label for="address">Address:</label>
          <input type="text" id="address" name="address" value="{{ user.address if user.address else ''}}" required />
        </div>

        <div class="form-section">
          <label for="dob">Date of Birth:</label>
          <input type="date" id="dob" name="dob" value="{{ user.dob }}" required />
        </div>

        <div class="form-section" id="age_section" style="display:none;">
          <label for="age">Great {{ user.name if user.name else user.username }}! You're:</label>
          <span class="age" id="age">
          </span>
        </div>
        <!-- TO ADD PHONE NUMBER VALIDATION HERE -->
        <div class="form-section">
          <label for="phone_no">Phone Number:</label>
<<<<<<< Updated upstream
          <input type="tel" id="phone_no" name="phone_no" value="{{ user.phone_no if user.phone_no else '' }}"
            required />
=======
          <input type="text" id="phone" name="phone_no" value="{{ user.phone_no if user.phone_no else '' }}" required />
          <button>Verify</button>
>>>>>>> Stashed changes
        </div>

        <div class="form-section">
          <label for="blood_type">Blood Type:</label>
          <select id="blood_type" name="blood_type" required>
            <option value="" disabled selected>Select your blood type</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
        </div>



        <!-- Health Information Section -->
        <div class="form-section">
          <label for="diseases">Diseases (Select all that apply):</label>
          <select id="diseases" name="diseases[]">
            <option value="none" selected>Select Diseases</option>
            <option value="diabetes">Diabetes</option>
            <option value="heart_disease">Heart Disease</option>
            <option value="hypertension">Hypertension</option>
            <option value="arthritis">Arthritis</option>
            <option value="asthma">Asthma</option>
            <option value="cancer">Cancer</option>
          </select>
        </div>

        <!-- Display Selected Diseases Here -->

        <div id="selectedDiseasesContainer" class="form-section">
          <label>Selected Diseases:</label>
          <ul id="selectedDiseases">
            {% if user.diseases %}
            {% for disease in user.diseases.split(',') %}
            <li data-value="{{ disease }}">{{ disease }}</li>
            {% endfor %}
            {% endif %}
          </ul>
        </div>

        <div class="form-section">
          <label for="additional_health_details">Additional Health Details:</label>
          <textarea id="additional_health_details" name="additional_health_details"
            rows="4">{{ user.additional_health_details if user.additional_health_details else ''}}</textarea>
        </div>

        <div class="form-section">
          <label for="bloodReport">Upload Blood Report:</label>
          <input type="file" id="bloodReport" name="bloodReport" accept=".pdf,.jpg,.jpeg,.png" />
        </div>

        <!-- Emergency Contact Information -->
        <div class="form-section">
          <label for="guardianEmail">Guardian's Email:</label>
          <input type="email" id="guardianEmail" name="guardian_email" value="{{guardian_email}}" {% if guardian_email
            %} style="background-color: #dcdcdc; cursor: not-allowed;" readonly {% endif %} required />
        </div>

        <div class="form-section">
          <label for="guardianName">Guardian's Name:</label>
          <input type="text" id="guardianName" name="guardian_name" value="{{guardian_name}}" {% if guardian_name %}
            style="background-color: #dcdcdc; cursor: not-allowed;" readonly {% endif %} required />
        </div>

        <div class="form-section">
          <label for="guardianAddress">Guardian's Address:</label>
          <textarea id="guardianAddress" name="guardian_address" rows="3" required>{{guardian_address}}</textarea>
        </div>

        <div class="form-section">
          <label for="guardianContact">Guardian's Contact Number:</label>
          <input type="tel" id="guardianContact" name="guardian_contact" value="{{guardian_contact}}" required />
        </div>

        <input type="hidden" name="islinked" value="{{islinked}}" />

        <!-- Submit Button -->
        <button type="submit" onclick="submitForm()">Submit</button>
      </form>
    </div>
  </div>
</div>

{% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="{{url_for('static',filename='js/form.js')}}"></script>
{% endblock script %}

{% endblock content %}
